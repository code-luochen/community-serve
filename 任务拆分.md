# 小区老年人服务管理系统 — 功能模块拆分

根据产品文档，我将系统拆分为前后端开发任务，便于毕设开发进度管理。

---

## 一、后端模块拆分（Nest.js）

### 1. 用户认证与权限模块

| 任务编号 | 任务名称         | 子任务                                                                                       |
| -------- | ---------------- | -------------------------------------------------------------------------------------------- |
| BE-01    | 账号注册与初始化 | - 管理员创建用户接口 <br> - 账号规则校验（正则）<br> - 密码加密（BCrypt）<br> - 用户角色绑定 |
| BE-02    | 登录认证         | - 账号密码验证 <br> - JWT Token生成（2小时有效期）<br> - Token刷新机制<br> - 登录日志记录    |
| BE-03    | 密码管理         | - 密码长度限制在6-16个字符 <br> - 首次登录强制修改密码<br> - 管理员重置密码接口                          |
| BE-04    | 权限拦截器       | - JWT解析与校验 <br> - 角色权限校验（防越权）<br> - 路由访问控制                             |

### 2. 用户与档案模块

| 任务编号 | 任务名称       | 子任务                                                                          |
| -------- | -------------- | ------------------------------------------------------------------------------- |
| BE-05    | 用户信息管理   | - 用户信息查询/修改 <br> - 头像上传（OSS/本地）<br> - 用户状态管理（启用/禁用） |
| BE-06    | 老年人档案管理 | - 档案创建/查询/更新 <br> - 紧急联系人信息管理                                  |

### 3. 服务管理模块

| 任务编号 | 任务名称       | 子任务                                                                               |
| -------- | -------------- | ------------------------------------------------------------------------------------ |
| BE-07    | 服务分类与浏览 | - 服务列表查询（分页）<br> - 服务搜索（关键词）<br> - 服务分类筛选（生活/药品/医护） |
| BE-08    | 服务发布与审核 | - 商家发布服务 <br> - 管理员审核服务（通过/拒绝）<br> - 服务上下架管理               |

### 4. 订单管理模块

| 任务编号 | 任务名称     | 子任务                                                                                                  |
| -------- | ------------ | ------------------------------------------------------------------------------------------------------- |
| BE-09    | 订单创建     | - 生成订单编号（SN+时间戳）<br> - 服务快照保存（JSON）<br> - 订单状态初始化（待接单）                   |
| BE-10    | 订单状态流转 | - 商家接单/拒单 <br> - 状态更新（配送中/已完成）<br> - 订单取消（超时自动取消）                         |
| BE-11    | 订单查询     | - 老年人订单列表 <br> - 家属查看关联老人订单<br> - 商家订单管理（待处理/历史）<br> - 管理员全局订单监控 |
| BE-12    | 订单评价     | - 评价提交（星级+内容）<br> - 评价查询（家属可见）                                                      |

### 5. 健康监测模块

| 任务编号 | 任务名称     | 子任务                                                                                                                                                          |
| -------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| BE-13    | 健康数据录入 | - 血压/心率/血糖/体温录入 <br> - 数据格式校验                                                                                                                   |
| BE-14    | 健康阈值预警 | - 血压异常判断（>140/90或<90/60）<br> - 心率异常判断（>100或<60）<br> - 血糖/体温异常判断 <br> - 异常标记（is_abnormal=1）<br> - 异常类型记录（hypertension等） |
| BE-15    | 健康数据查询 | - 个人健康历史记录 <br> - 家属查看关联老人健康数据                                                                                                              |

### 6. 紧急求助模块

| 任务编号 | 任务名称       | 子任务                                                                                                |
| -------- | -------------- | ----------------------------------------------------------------------------------------------------- |
| BE-16    | 求助触发与记录 | - 一键求助接口 <br> - 位置信息获取（高德地图）<br> - 求助状态初始化（待处理）                         |
| BE-17    | 求助处理       | - 家属/管理员确认处理 <br> - 处理人分配（管理员）<br> - 处理结果记录 <br> - 状态更新（处理中/已处理） |

### 7. 通知中心模块

| 任务编号 | 任务名称 | 子任务                                                                                                        |
| -------- | -------- | ------------------------------------------------------------------------------------------------------------- |
| BE-18    | 通知推送 | - 订单状态变更通知 <br> - 健康异常预警通知 <br> - 紧急求助通知 <br> - 通知列表查询（分页）<br> - 通知已读标记 |

### 8. 数据统计模块

| 任务编号 | 任务名称       | 子任务                                                                                                 |
| -------- | -------------- | ------------------------------------------------------------------------------------------------------ |
| BE-19    | 管理员数据看板 | - 用户统计（老人/家属/商家数量）<br> - 订单统计（日/周/月）<br> - 健康预警统计 <br> - 服务类型分布统计 |

---

## 二、前端模块拆分

### （一）老年人端（UniApp 小程序）

| 任务编号 | 任务名称     | 子任务                                                                                                                                  |
| -------- | ------------ | --------------------------------------------------------------------------------------------------------------------------------------- |
| FE-01    | 首页         | - 天气/问候语展示 <br> - 四大功能入口（服务/健康/求助/订单）<br> - 今日推荐服务列表 <br> - 通知角标显示 <br> - 底部一键求助按钮（固定） |
| FE-02    | 服务预约页面 | - 服务列表页（分类/搜索）<br> - 服务详情页（价格/描述/评价）<br> - 预约表单页（时间/地址/备注）<br> - 预约成功提示                      |
| FE-03    | 订单管理页面 | - 订单列表页（待服务/已完成）<br> - 订单详情页（状态/服务信息）<br> - 确认收货按钮 <br> - 评价弹窗（星级+内容）                         |
| FE-04    | 健康数据页面 | - 健康录入页（血压/心率/血糖/体温）<br> - 异常提示弹窗 <br> - 历史记录页（列表展示）                                                    |
| FE-05    | 紧急求助页面 | - 二次确认弹窗 <br> - 求助成功提示                                                                                                      |
| FE-06    | 个人信息页面 | - 信息查看/编辑 <br> - 密码修改                                                                                                         |
| FE-07    | 设置页面     | - 字体大小调节（18/20/24px）<br> - 语音播报开关                                                                                         |

---

### （二）Web统一后台（Vue3 + Element Plus）

#### 1. 公共模块

| 任务编号 | 任务名称 | 子任务                                                                                |
| -------- | -------- | ------------------------------------------------------------------------------------- |
| FE-10    | 登录页面 | - 账号密码输入 <br> - 角色选择（家属/商家/管理员）<br> - 登录按钮 <br> - 初始密码提示 |

#### 2. 家属端（路由前缀：/family）

| 任务编号 | 任务名称   | 子任务                                                                                                           |
| -------- | ---------- | ---------------------------------------------------------------------------------------------------------------- |
| FE-11    | 家属首页   | - 老人健康卡片（最新血压/心率）<br> - 今日订单卡片 <br> - 异常预警列表（红色高亮）<br> - 健康趋势折线图（近7天） |
| FE-12    | 健康监控页 | - 关联老人列表 <br> - 健康数据详情页 <br> - 历史记录查询                                                         |
| FE-13    | 订单监督页 | - 订单列表（关联老人）<br> - 订单详情（含评价）                                                                  |

#### 3. 商家端（路由前缀：/merchant）

| 任务编号 | 任务名称   | 子任务                                                                                      |
| -------- | ---------- | ------------------------------------------------------------------------------------------- |
| FE-14    | 商家首页   | - 待处理订单卡片（红色角标）<br> - 今日收入统计 <br> - 库存预警卡片 <br> - 订单状态分布饼图 |
| FE-15    | 订单处理页 | - 待接单列表 <br> - 接单/拒单操作 <br> - 订单状态更新（配送中/完成）                        |
| FE-16    | 服务管理页 | - 服务列表（上架/下架）<br> - 服务发布表单 <br> - 服务编辑/删除                             |

#### 4. 管理员端（路由前缀：/admin）

| 任务编号 | 任务名称   | 子任务                                                                                                                              |
| -------- | ---------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| FE-17    | 管理员首页 | - 全局数据卡片（用户数/订单量/预警数）<br> - 待审核列表（商家/服务）<br> - 紧急求助待处理（置顶）<br> - 服务分布柱状图 + 订单趋势图 |
| FE-18    | 用户管理页 | - 用户列表（四角色）<br> - 用户创建/编辑 <br> - 密码重置 <br> - 状态管理（启用/禁用）                                               |
| FE-19    | 服务审核页 | - 待审核服务列表 <br> - 审核操作（通过/拒绝）<br> - 已审核服务查询                                                                  |
| FE-20    | 订单监控页 | - 全局订单列表 <br> - 强制取消订单 <br> - 订单详情查看                                                                              |
| FE-21    | 健康预警页 | - 异常记录列表 <br> - 导出功能（Excel）                                                                                             |
| FE-22    | 求助处理页 | - 求助列表（待处理/处理中）<br> - 分配处理人 <br> - 处理结果记录                                                                    |

---

## 三、开发优先级建议

| 优先级 | 任务编号            | 模块名称         |
| ------ | ------------------- | ---------------- |
| **P0** | BE-01 ~ BE-04       | 后端认证与权限   |
| **P0** | FE-10               | Web登录页        |
| **P0** | BE-09 ~ BE-12       | 订单管理         |
| **P0** | FE-01, FE-02, FE-03 | 老年人端核心流程 |
| **P0** | BE-13 ~ BE-15       | 健康监测         |
| **P0** | FE-04               | 健康数据录入     |
| **P0** | BE-16 ~ BE-17       | 紧急求助         |
| **P0** | FE-05               | 一键求助         |
| **P1** | FE-11, FE-14, FE-17 | 三角色首页       |
| **P1** | BE-18               | 通知中心         |
| **P2** | FE-18 ~ FE-22       | 管理员高级功能   |

---

如需进一步细化某个模块的API设计或数据库操作，请告诉我具体任务编号！
